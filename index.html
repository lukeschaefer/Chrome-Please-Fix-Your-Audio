<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="./style.css" />
  <title>ChromePleaseFixYourAudio</title>
</head>

<body>
  <h1>Chrome Please Fix Your Audio</h1>
  <h2>Chrome bug <a href="https://issues.chromium.org/issues/327472528">#327472528</a></h2>
  <p id="intro">
    Chrome has the ability to subtract your <b>audio output</b> (speakers or headphones) from your <b>audio input</b>
    (microphone).
    This is helpful in some circumstances, like when taking a call without headphones - but can be annoying in many
    other cases
    where you want clean and crisp audio recording.
    </p>
    <p>
      <b>Here's what it sounds like when this happens:</b>
  </p>
  <audio src="/sample.mp3" controls="true"></audio>
  <p>You can test this easily by using one of the many <a
      href="https://www.google.com/search?q=record+audio+online&oq=record+audio+online">"record audio online"</a> sites,
    and playing a <a href="https://www.youtube.com/watch?v=dQw4w9WgXcQ">YouTube video</a> in another tab. To aid with
    accurate replication, here's a tiny sandbox to reproduce it:</p>
  <div id="app">
    <button id="sampleButton" onclick="recordSample()">RECORD SAMPLE</button>
    <button id="toggleButton" onclick="toggleClick()">TOGGLE BACKGROUND</button>
    <div id="samples"></div>
  </div>
  <p>
    The following code snippet is supposed to prevent this issue, but doesn't:
  </p>
  <pre>const stream = await navigator.mediaDevices.getUserMedia({
  audio: true,
  echoCancellation: false,
  noiseSuppression: false,
  autoGainControl: false,
});</pre>
  <br>
  <h2 id="fix">The Fix</h2>
  <p>
    Go to <u>chrome://flags</u> and turn off these flags:
  </p>
  <img src="/flags.png">
  <p>If you're also impacted by this <a href="https://issues.chromium.org/issues/327472528">Chrome Bug</a>, go ahead and
    +1 it.
    This site is <a href="https://github.com/lukeschaefer/chrome-please-fix-your-audio">Open Source</a> and very small,
    so feel free to double check my work.
  </p>
  <p>
    If you're wondering why I care, it's because I'm working on
    <a href="https://LoopBox.app">LoopBox</a> - a fun little tool to record layered audio loops in your browser...
    it is severely impacted by this bug.
  </p>
  <br><br><br><br>
  <script type="module" src="/src/main.ts"></script>
</body>

</html>